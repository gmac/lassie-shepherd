/*** Lassie Engine* @author Greg MacWilliam.*/package com.lassie.menu.controls{	import flash.display.Sprite;	import flash.text.TextField;	import flash.text.TextFieldAutoSize;	import flash.events.MouseEvent;	import flash.events.Event;		/**	* Lassie Player game menu slider control.	*/	public class SliderControl extends Sprite	{		// stage instances.		public var uiLabelText:TextField;		public var uiSliderRange:Sprite;		public var uiSliderTip:Sprite;		private var _percent:Number = 0;				public function SliderControl():void		{			super();			mouseChildren = false;			hitArea = uiSliderRange;			addEventListener(MouseEvent.MOUSE_DOWN, this._onMouseDown, false, 0, true);			uiLabelText.autoSize = TextFieldAutoSize.LEFT;		}				/**		* Specifies the button label text.		*/		public function get label():String {			return uiLabelText.text;		}		public function set label($label:String):void {			uiLabelText.text = $label;		}		/**		* Specifies percent value of the slider, expressed as a number between 0 and 1.		*/		public function get percent():Number {			return _percent;		}		public function set percent($percent:Number):void {			_percent = Math.max(0, Math.min($percent, 1));			var $half:Number = uiSliderTip.width / 2;			var $min:Number = uiSliderRange.x + $half;			var $max:Number = uiSliderRange.x + uiSliderRange.width - $half;			var $val:Number = uiSliderRange.x + (uiSliderRange.width * _percent);			uiSliderTip.x = Math.max($min, Math.min($val, $max));		}				/** @private called upon mouse down on the range. */		private function _onMouseDown($event:Event):void {			stage.addEventListener(MouseEvent.MOUSE_UP, this._onMouseUp, false, 0, true);			addEventListener(Event.ENTER_FRAME, this._onDragSlider, false, 0, true);		}				/** @private called upon mouse up after pressing on the raonge. */		private function _onMouseUp($event:Event):void {			stage.removeEventListener(MouseEvent.MOUSE_UP, this._onMouseUp);			removeEventListener(Event.ENTER_FRAME, this._onDragSlider);			dispatchEvent( new Event(Event.CHANGE) );		}				/** @private called while dragging along the the slider. */		private function _onDragSlider($event:Event):void {			var $perc:Number = (mouseX - uiSliderRange.x) / uiSliderRange.width;			$perc = Math.max(0, Math.min($perc, 1));						// snap value.			var $snap:Number = 0.03;			if (Math.abs($perc - 0.25) < $snap) $perc = 0.25;			else if (Math.abs($perc - 0.5) < $snap) $perc = 0.5;			else if (Math.abs($perc - 0.75) < $snap) $perc = 0.75;			percent = $perc;		}	}}